!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SWQ=e():t.SWQ=e()}(this,()=>{return t={228:t=>{!function(t){"use strict";const e={instances:[],init:function(t,e={}){return document.querySelectorAll(t).forEach(t=>{t.swq||this.instances.push(new s(t,e))}),this.instances}};class s{constructor(t,e={}){this.element=t,this.element.swq=this,this.options=e,this._parseConfig(),this._parseQuestions(),this._setupUI(),this.state={currentIndex:-1,userAnswers:{},isFinished:!1,startTime:null,timerId:null},this._startQuiz()}_parseConfig(){const t={};for(const e in this.element.dataset)if(e.startsWith("swq")){let s=e.substring(3).replace(/-(\w)/g,(t,e)=>e.toUpperCase());s=s.charAt(0).toLowerCase()+s.slice(1);let i=this.element.dataset[e];"true"===i&&(i=!0),"false"===i&&(i=!1),!isNaN(parseFloat(i))&&isFinite(i)&&(i=parseFloat(i)),t[s]=i}this.config={feedbackMode:"standard",allowSkip:!1,allowBack:!1,timer:0,...t,...this.options.settings||{}}}_parseQuestions(){this.options.questions&&Array.isArray(this.options.questions)?this.questions=this.options.questions:(this.questions=[],this.element.querySelectorAll("[data-swq-question-id]").forEach(t=>{const e=t.querySelector("[data-swq-type]");if(!e)return void console.warn(`Question ${t.dataset.swqQuestionId} is missing data-swq-type attribute`);const s=t.querySelector("p");if(!s)return void console.warn(`Question ${t.dataset.swqQuestionId} is missing question text`);const i={id:t.dataset.swqQuestionId,text:s.innerHTML,type:e.dataset.swqType,answer:e.dataset.swqAnswer,options:e.dataset.swqOptions?JSON.parse(e.dataset.swqOptions):[]};i.answer||"text"===i.type?this.questions.push(i):console.warn(`Question ${i.id} is missing answer attribute`)}))}_setupUI(){if(this.ui={nextBtn:this.element.querySelector("[data-swq-next]"),prevBtn:this.element.querySelector("[data-swq-previous]"),checkAnswerBtn:this.element.querySelector("[data-swq-check-answer]"),skipBtn:this.element.querySelector("[data-swq-skip-question]"),timerDisplay:this.element.querySelector("[data-swq-timer]"),resultsContainer:this.element.querySelector("[data-swq-results]"),questionsContainer:this.element.querySelector("[data-swq-answers]")||this.element},!this.ui.nextBtn&&!this.ui.prevBtn&&!this.ui.checkAnswerBtn){const t=document.createElement("div");t.className="swq-controls-default",this.config.allowBack&&(this.ui.prevBtn=document.createElement("button"),this.ui.prevBtn.textContent="Previous",this.ui.prevBtn.setAttribute("data-swq-previous",""),t.appendChild(this.ui.prevBtn)),this.ui.nextBtn=document.createElement("button"),this.ui.nextBtn.textContent="Next",this.ui.nextBtn.setAttribute("data-swq-next",""),t.appendChild(this.ui.nextBtn),this.element.appendChild(t)}this.config.timer>0&&!this.ui.timerDisplay&&(this.ui.timerDisplay=document.createElement("div"),this.ui.timerDisplay.className="swq-timer-default",this.ui.timerDisplay.setAttribute("data-swq-timer",""),this.element.insertBefore(this.ui.timerDisplay,this.ui.questionsContainer)),this.ui.resultsContainer||(this.ui.resultsContainer=document.createElement("div"),this.ui.resultsContainer.className="swq-results-default",this.ui.resultsContainer.setAttribute("data-swq-results",""),this.element.appendChild(this.ui.resultsContainer)),this.ui.nextBtn&&this.ui.nextBtn.addEventListener("click",()=>this._handleNext()),this.ui.prevBtn&&this.ui.prevBtn.addEventListener("click",()=>this._handlePrevious()),this.ui.checkAnswerBtn&&this.ui.checkAnswerBtn.addEventListener("click",()=>this._handleCheckAnswer()),this.ui.skipBtn&&this.ui.skipBtn.addEventListener("click",()=>this._handleSkip())}_startQuiz(){this.state.isFinished||0===this.questions.length||(this.state.startTime=Date.now(),this.config.timer>0&&(this._updateTimerDisplay(),this.state.timerId=setInterval(()=>this._updateTimer(),1e3)),this._renderQuestion(0),"function"==typeof this.config.onStart&&this.config.onStart.call(this))}_endQuiz(t="completed"){if(this.state.isFinished)return;this.state.isFinished=!0,clearInterval(this.state.timerId),"standard"===this.config.feedbackMode&&this.questions.forEach(t=>{const e=this._getOrCreateQuestionElement(t.id),s=this.state.userAnswers[t.id];s&&(e.classList.add(s.isCorrect?"swq-correct":"swq-incorrect"),this._showFeedback(t,s.isCorrect))}),Array.from(this.ui.questionsContainer.children).forEach(t=>{t.dataset.swqQuestionId&&(t.style.display="none")}),this.ui.nextBtn&&(this.ui.nextBtn.style.display="none"),this.ui.prevBtn&&(this.ui.prevBtn.style.display="none"),this.ui.checkAnswerBtn&&(this.ui.checkAnswerBtn.style.display="none"),this.ui.skipBtn&&(this.ui.skipBtn.style.display="none"),this.ui.timerDisplay&&(this.ui.timerDisplay.style.display="none");let e=0;this.questions.forEach(t=>{const s=this.state.userAnswers[t.id];s&&s.isCorrect&&e++});const s={score:e,total:this.questions.length,percentage:this.questions.length>0?Math.round(e/this.questions.length*100):0,reason:t};this.ui.resultsContainer.innerHTML=`\n                <div class="swq-result-summary">\n                    <h3>Quiz Complete!</h3>\n                    <p>You scored <strong>${s.score} out of ${s.total}</strong> (${s.percentage}%).</p>\n                    ${"time_up"===t?"<p>Time ran out!</p>":""}\n                </div>\n            `,this.ui.resultsContainer.style.display="block","function"==typeof this.config.onComplete&&this.config.onComplete.call(this,s)}_renderQuestion(t){if(t<0||t>=this.questions.length)return;this.state.currentIndex=t;const e=this.questions[t],s=this._getOrCreateQuestionElement(e.id);Array.from(this.ui.questionsContainer.children).forEach(t=>{t.dataset.swqQuestionId&&(t.style.display="none")});const i=s.querySelector(".swq-options-container");if(!i||0===i.children.length){const t=s.querySelector("[data-swq-type]");t?t.outerHTML=this._buildQuestionHTML(e):s.innerHTML.trim()||(s.innerHTML=this._buildQuestionHTML(e))}s.style.display="block",s.classList.add("swq-active"),this._restoreAnswer(e.id),this._updateControls(),"function"==typeof this.config.onQuestionChange&&this.config.onQuestionChange.call(this,e,t)}_getOrCreateQuestionElement(t){let e=this.ui.questionsContainer.querySelector(`[data-swq-question-id="${t}"]`);return e||(e=document.createElement("div"),e.dataset.swqQuestionId=t,e.className="swq-question",this.ui.questionsContainer.appendChild(e)),e}_buildQuestionHTML(t){let e="";const s=`swq-q-${t.id}`;switch(t.type){case"choice":case"true/false":e=("true/false"===t.type?["True","False"]:t.options).map(t=>`\n                        <label class="swq-option">\n                            <input type="radio" name="${s}" value="${t}" onchange="this.closest('[data-swq-quiz]').swq._updateControls()">\n                            <span>${t}</span>\n                        </label>\n                    `).join("");break;case"select-multiple":e=t.options.map(t=>`\n                        <label class="swq-option">\n                            <input type="checkbox" name="${s}" value="${t}" onchange="this.closest('[data-swq-quiz]').swq._updateControls()">\n                            <span>${t}</span>\n                        </label>\n                    `).join("");break;case"text":e=`<input type="text" name="${s}" class="swq-input" oninput="this.closest('[data-swq-quiz]').swq._updateControls()">`;break;case"number":e=`<input type="number" name="${s}" class="swq-input" oninput="this.closest('[data-swq-quiz]').swq._updateControls()">`}const i=this.ui.questionsContainer.querySelector(`[data-swq-question-id="${t.id}"]`);return i&&i.querySelector("p")?`\n                    <div class="swq-options-container" data-swq-type="${t.type}">${e}</div>\n                    <div class="swq-feedback"></div>\n                `:`\n                    <p class="swq-question-text">${t.text}</p>\n                    <div class="swq-options-container" data-swq-type="${t.type}">${e}</div>\n                    <div class="swq-feedback"></div>\n                `}_updateControls(){const{currentIndex:t}=this.state,e=this.questions.length,s=this._getOrCreateQuestionElement(this.questions[t]?.id);this.ui.prevBtn&&(this.ui.prevBtn.disabled=t<=0||!this.config.allowBack);const i=this._collectAnswer(),n=Array.isArray(i)?i.length>0:null!==i&&""!==i&&void 0!==i,r=t===e-1;this.ui.checkAnswerBtn&&(this.ui.checkAnswerBtn.disabled=!n,"retry"===this.config.feedbackMode&&s.classList.contains("swq-incorrect")?this.ui.checkAnswerBtn.textContent="Try Again":s.classList.contains("swq-correct")?this.ui.checkAnswerBtn.textContent=r?"Finish Quiz":"Continue":this.ui.checkAnswerBtn.textContent="Submit Answer"),this.ui.skipBtn&&(this.ui.skipBtn.disabled=!this.config.allowSkip,this.ui.skipBtn.textContent=r?"Skip to Results":"Skip Question"),this.ui.nextBtn&&("retry"===this.config.feedbackMode&&s.classList.contains("swq-incorrect")?this.ui.nextBtn.textContent="Try Again":"immediate"===this.config.feedbackMode?this.ui.nextBtn.textContent=r?"Finish Quiz":"Next Question":this.ui.nextBtn.textContent=r?"Finish Quiz":"Next",this.ui.nextBtn.disabled=!n&&!this.config.allowSkip)}_updateTimer(){const t=Math.floor((Date.now()-this.state.startTime)/1e3),e=this.config.timer-t;e<=0?this._endQuiz("time_up"):this._updateTimerDisplay(e)}_updateTimerDisplay(t=this.config.timer){if(!this.ui.timerDisplay)return;const e=Math.floor(t/60),s=t%60;this.ui.timerDisplay.textContent=`${e}:${s.toString().padStart(2,"0")}`}_handleNext(){const t=this.questions[this.state.currentIndex],e=this._collectAnswer(),s=this._getOrCreateQuestionElement(t.id);s.classList.remove("swq-incorrect","swq-correct");const i=this._isAnswerCorrect(t,e);if(this.state.userAnswers[t.id]={answer:e,isCorrect:i},"immediate"===this.config.feedbackMode)s.classList.add(i?"swq-correct":"swq-incorrect"),this._showFeedback(t,i),s.querySelectorAll("input").forEach(t=>t.disabled=!0),this.state.currentIndex<this.questions.length-1?this._renderQuestion(this.state.currentIndex+1):this._endQuiz();else if("retry"===this.config.feedbackMode){if(s.classList.add(i?"swq-correct":"swq-incorrect"),this._showFeedback(t,i),!i)return void this._updateControls();this.state.currentIndex<this.questions.length-1?this._renderQuestion(this.state.currentIndex+1):this._endQuiz()}else this.state.currentIndex<this.questions.length-1?this._renderQuestion(this.state.currentIndex+1):this._endQuiz()}_handlePrevious(){this.config.allowBack&&this.state.currentIndex>0&&this._renderQuestion(this.state.currentIndex-1)}_handleCheckAnswer(){const t=this.questions[this.state.currentIndex],e=this._collectAnswer(),s=this._getOrCreateQuestionElement(t.id);if(null===e||""===e||Array.isArray(e)&&0===e.length)return;s.classList.remove("swq-incorrect","swq-correct");const i=this._isAnswerCorrect(t,e);this.state.userAnswers[t.id]={answer:e,isCorrect:i},"standard"!==this.config.feedbackMode&&(s.classList.add(i?"swq-correct":"swq-incorrect"),this._showFeedback(t,i),"immediate"===this.config.feedbackMode&&s.querySelectorAll("input").forEach(t=>t.disabled=!0)),this._updateControls()}_handleSkip(){if(!this.config.allowSkip)return;const t=this.questions[this.state.currentIndex];this.state.userAnswers[t.id]={answer:null,isCorrect:!1,skipped:!0},this.state.currentIndex<this.questions.length-1?this._renderQuestion(this.state.currentIndex+1):this._endQuiz()}_collectAnswer(){const t=this.questions[this.state.currentIndex],e=this._getOrCreateQuestionElement(t.id),s=`swq-q-${t.id}`;switch(t.type){case"choice":case"true/false":const t=e.querySelector(`input[name="${s}"]:checked`);return t?t.value:null;case"select-multiple":return Array.from(e.querySelectorAll(`input[name="${s}"]:checked`)).map(t=>t.value);case"text":case"number":const i=e.querySelector(`input[name="${s}"]`);return i?i.value:null}return null}_isAnswerCorrect(t,e){if(null===e||""===e||void 0===e)return!1;if(!t.answer)return!1;const s=t.answer.toString();switch(t.type){case"select-multiple":const t=s.split(",").map(t=>t.trim()).sort(),i=Array.isArray(e)?e.sort():[];return JSON.stringify(t)===JSON.stringify(i);case"text":return e.trim().toLowerCase()===s.toLowerCase();default:return e.toString()===s}}_restoreAnswer(t){const e=this.state.userAnswers[t];if(!e)return;const s=this.questions.find(e=>e.id===t),i=this._getOrCreateQuestionElement(t),n=`swq-q-${s.id}`,r=e.answer;switch(s.type){case"choice":case"true/false":const t=i.querySelector(`input[name="${n}"][value="${r}"]`);t&&(t.checked=!0);break;case"select-multiple":r.forEach(t=>{const e=i.querySelector(`input[name="${n}"][value="${t}"]`);e&&(e.checked=!0)});break;case"text":case"number":const e=i.querySelector(`input[name="${n}"]`);e&&(e.value=r)}}_showFeedback(t,e){const s=this._getOrCreateQuestionElement(t.id),i=s.querySelector(".swq-feedback");i&&(e?(i.textContent="Correct!",i.className="swq-feedback swq-feedback-correct"):("retry"===this.config.feedbackMode?i.textContent="Incorrect. Please try again.":i.textContent=`Incorrect. The correct answer is: ${t.answer}`,i.className="swq-feedback swq-feedback-incorrect"),"immediate"===this.config.feedbackMode&&s.querySelectorAll("input").forEach(t=>t.disabled=!0))}}document.addEventListener("DOMContentLoaded",()=>{e.init("[data-swq-quiz]")}),t.SWQ=t.swq=e}(window),t.exports&&(t.exports=SWQ)}},e={},function s(i){var n=e[i];if(void 0!==n)return n.exports;var r=e[i]={exports:{}};return t[i](r,r.exports,s),r.exports}(228);var t,e});